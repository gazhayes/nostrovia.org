Mike Dilger - NIP65

G: Welcome to Nostrovia, your weekly Nostr podcast. I'm your host, G Sovereignty, and I'm joined this week by Bitcarrot for the 
interview. First up, a shoutout to some of the people who are following us on Fountain. "ahanagar" boosted us 4,000 sats and says "Great conversation. I like the different perspectives and obstacles they have encountered on the way." Meer Mortals Podcast boosted us 2,222 sats - "Thanks for the info guys, very handy. Might be worth reducing the music before the interview. Felt a little long."

G: fiatjaf has released a cool little JavaScript utility which allows you to embed a Nostr conversation in any website. I think this is a really cool way to use Nostr, and you can go to his GitHub to see that and see how to use it.

B: There was effectively an activity spike that looked like a double top, (like a,) you know like a financial chart of a double top that crashed. And then now it's starting to recover since last week and that's kind of a good sign because, you know, we're experiencing growing pains on the Nostr network with the amount of spam that came in and a lot of the paid relays came online and so people are looking for "well, where am I going to find these paid relays" and there's a new website that's called relay.exchange which shows you a lot of the paid relays, how many lightning sats you can spend to join the paid relays, and who's running them. In a way, it's good to have a little bit of control over who's posting instead of spam, but, at the same time right now if you're brand new to the network it's very difficult for you to say "okay which paid relay do I go to?" Maybe you're on a client that is, you know, offering you a couple of relays. Maybe there's a client that has a degraded experience because you're not using paid relays. Overall there are a lot of people who have moved completely on to paid relays. There are still some good public relays which are actually doing very well, for example Snort relay and Damus relays are still doing pretty well. You know, on certain clients it's okay, other clients struggled and it's good because it shows you the resilience of the community after a huge slam down in terms of network disruption. A lot of people were complaining it took them several minutes to actually see somebody's profile page and a very very highly degraded experience. 

-- Transition --

M: I love the idea of having fruit trees (with the point being) and I love the idea of being self sufficient, right. One of the reasons I like (you know) Bitcoin and gold and things is I don't trust the government and I think bad things could happen in the future. I want to be prepared so, you know, having sheep, that's part of it. I found Nostr at the beginning or probably late October of last year. So only three or four months ago. And though I first heard about it I think it was on Timcast, if you're familiar with Timcast. It wasn't Tim Pool, it was somebody in the background, they were talking about Twitter. And it was somebody in the background that said "or Nostr." I think that's about what was said. And I had heard about a lot of Twitter alternatives but I'd never heard of Nostr so I had to look it up. And I googled it and I read fiatjaf's GitHub thing where he describes it. And my first impression was "well that's not quite going to work." And I thought the thing that it needed was publish and subscribe and then somebody told me "no it actually has publish and subscribe." Basically when you're connected to the websocket after you get your messages as long as you stay connected as the messages come in they will come in. And I thought "okay, well maybe that will work, but it seems like you'd be connect to the websocket all the time." And I didn't know, I hadn't really thought it through. So I thought it through a bit because I hadn't really. And, after I did I thought "no this is good. This is going to work." So I loved the "you make your own identity" and the idea of having relays where you just subscribe to a filter of events on the relays wasn't something that I had thought of, but what I had thought of previous to Nostr was that what people need if you're going to have multiple social media services is people need to find people. So they need to know if you moved from Twitter to one of the alternatives you lose all your followers so there's got to be someway people can find where is this person posting now. So I was trying to solve that problem and I was looking at ways to do it and I thought maybe you could have a DNS record that points at just current social media followers and I thought maybe I could make a client, and I called it Gossip, and it would connect to Twitter but also connect to Mastadon, but also connect to Gettr, and Truth Social, and Locals, and all the other ones. And then it would follow that DNS record if it got repointed, and the idea being that well, I'm not going to change the world with this, but if I can make a really good client maybe people will start sharing the idea. But once I found Nostr I was like, okay this is just so good in other ways that I'm just going to toss that Gossip client and I'm going to make Gossip just be a Nostr client. So, yeah, that's how I started with it.

G: And what improvements do you think can be made to Nostr at a protocol level?

M: I do submit NIPs when I think of something that needs improvement. So I can talk about the latest NIP I've submitted because I think it's the thing I think is the most important thing for improving Nostr, and that is right now, and initially all the clients that I saw you had read and write relays but you read other peoples' events from your read relays, which wasn't where they were writing them. So other people would writing events to their write relays and you were reading events from your read relays and they may well have been very different relays. And so you can't necessarily find people. And I think what's happening then is people are all bunching up on the same relays or they're subscribing to lots and lots of relays to make sure they don't miss anything and, to me, that's not only is that centralizing people, it's overloading the central relays, and you're still going to miss things. It's not going to scale. Because once we have 10,000 relays the relay in Timbuktu nobody is going to use because nobody reads from it so why would you write to it. So, I think there was an idea coming from chat rooms or a community relay where everybody gathers around and that's still a brilliant model and I don't disagree with that model but I think if you want to follow people we have to do something different. So, that's where I submitted NIP 65. Before I did that, I wrote Gossip to do it this way. So Gossip is a Nostr client that finds where people post and it follows their posts wherever they happen to post. It tries to find where they post based on different types of information. Right now, the most common information is the contents of a Kind 3 event. The contents have your relays read and write, and that's done by Damus and Astral initially. There might be other ones that are also using that. So, Gossip looks there to try find out where people write. And then, if you're following somebody and it gets that contact list, finds out where they write, it can read their post. But, there's a catch-22, or a chicken and egg problem because where do you get their contact list? You get their contact list from where they post. But, you don't know where they post so how do you get the contact list? You're screwed. So in NIP 65, we've moved the contact list to a different event. It's an event that's small that doesn't need need really moderation by relays because it has no content except some URLs. The idea being that since it's so small and light weight you can just spread them everywhere. So you get your relay list, you send it to as many relays as you can, and then people can more easily find that list and now they know where you write and they can read your stuff. 

B: So, that's really interesting. When you talk about posting that event, is that the advertising aspect you have on your Gossip client because I noticed you have a button with advertising. 

M: Right, so advertise is for sending your relay list itself, because most events you're just going to write your event to whatever relays you write to. But the relay list itself you want to send that to many many places so people can find out where you write. And also, where you read. There's also a need for read relays still which we can talk about. It's less of a need. For following someone, mostly you want to know where they write. But if you want to tag somebody, and you want them to see it then you want to put it on a relay that they read from. So, that's what the read relays are for. Now a bit of a problem there is if you want to read messages where you're tagged by someone you don't already follow so you're not going to see it on their write relays, you're going to see spam because spammers will just tag you. So, there needs to be something done about that in terms of we have to figure out how we're going to deal with spam or whether you even want to see the things that tag you by people you don't follow, or if you only want to see them by people you follow then you don't need a read relay. You can just use a write relay. 

G: Have you had any thoughts about spam? Do you think paid relays are going to be enough to deal with it?

M: I've had thoughts about spam. Not as much as the relay developers because I think they're really on to this. People have talked about Proof of Work. People have talked about paid relays. People have talked about NIP 5 validation checks. I think paid relays is good. I think for Proof of Work, the way I would do it, and people have many different ideas, but I the way I would do it is just require a Proof of Work message that takes half a day to a day to create in order to be whitelisted, and then, of course, as soon as  you start spamming, that key is blacklisted and it takes another half day to a day to try again. People were thinking about the keys themselves starting with lots of zeros, like you were mining the keys. I think it's better to just have a single event as Proof of Work because when you're mining the keys there's a potential that you're weakening the key-space and you're weakening the key. I talked to a cryptographer about that and he gave a suggestion that instead of the key starting with lots of zeros the hash of the key starting with lots of zeros would be safe. We'd know that would be safe. It would still cut the key-space down, clearly, because it would have to start with lots of zeros, but it would cut the key space down in an irreversible way that a hacker couldn't use to crack the crypto.

G: So weakening the key space by reducing your total possible points along the curve that could have been used for that keypair. Can you elaborate on weakening the key space?

M: How's it weaken the key space? Well, you recognize all of these keys are points on an elliptic curve and you move around the elliptic curve around the x- and y-axis a certain way in order to, and through I suppose a modular field, so that it's really hard to reverse where that move came from. But if you're taking a public key that starts with lots and lots of zeros then you're just taking a tiny sliver of the curve. Right? Because you've just excluded most of the curve. So that might be a smart mathematician that figures out how to now, your key is no longer 64-bits long or however many bits it is, 256 bits. It's no longer that many bits, it's less because you've whittled the keyspace down and you've whittled it down in a way that's understandable and therefore may be a mathematician that figures out how to crack your more easily. Now, I don't think anybody has and the risk is probably actually low, but I'm not a cryptographer and I'm not a mathematician and that's why I asked a cryptographer the question. By the way, doing it with the npub mining, when you do it with the npub mining, much less of a concern because the way the npub keys are generated it's reversable, it's not hashed I guess, but it's not as clear as a bunch of leading zeros.

G: Yeah, it doesn't necessarily reduce the keyspace I guess.

B: So I found it interesting that you mentioned the hash of the key because that's very similar to how lightning invoices are handled. There's like a hash of a secret and that's used before the payment goes through on lightning addresses and lnurl. So I just want to make that note that this seems to be again a good way to solve the issue. 

M: Right, yeah well it actually was **(Phillip Rogaways)** idea. I didn't have it. I asked him and as I was driving home I came up with a different way to do it. I can't remember what it was but it was definitely not that. And he thought, well you can just hash the key. But I think it's even better just to say a relay just says you have to submit any event, or event with a challenge in it probably so it's not replayable, an event with a challenge in it that has a large Proof of Work and then you're allowed to go. But, at the same time, I don't want to focus on Proof of Work for relays because relay operators need to be compensated. I honestly think that relay operators are the front lines of free speech and if there's going to be attack on Nostr from people that don't like free speech it's going to be the relay operators standing there on the front lines. And they have to pay for servers, and they have to actual moderation because you do have to deal with things, and you have to deal with potentially law enforcement. So these guys are top notch in my book and I think you should have to pay for relays.

B: Absolutely. It's quite a lot of work to get them up and running it seems as well and maintaining the services. What I've kind of noticed is with the bunching up of users is that there are you know relays that are also paired together with clients and that might be one of those aspects. How do you think you can sort of break that? Is there an incentive model possibly to encourage people to use other relays because there are about 900 relays right now at this point that I see.

M: I think that this NIP 65 is what going to allow people to spread out. Because if clients implement that and if they go looking for posts on the relays that people write to so they are dynamically connecting to relays that you didn't even configure, then people don't need to bunch up. You can have your own personal relay and nothing else. And as long as I spread that NIP 65 Kind 10,002 event to a bunch of relays you can find my personal relay and then you go to my personal relay to get my stuff. It's like my website posting my blog, except it's my Nostr relay posting my microblog. So then people don't have to bunch up. Also, I think these per client relays are done for pragmatic reasons because we aren't looking to follow people the way that I think we should. So these relays like the Damus relay and the Snort.social relay that are client specific relays, I'm not saying they don't need or shouldn't have relays, but I think hopefully clients can pick their own relays that aren't, I think they can, I don't think they have to go on that client-specific relay, but I think relays will be able to spread out.

G: I think fiatjaf was mentioning something about the giving the user more of an indication of where an event came from. Like which relay it came from.

M: Yeah, there's a lot of different ways to use Nostr. Following somebody is just one. Connecting into a community hub is another. I've seen people can play chess over Nostr. And so the relay model, the way that you connect to relays or deal with relays may be very different for these different types of uses of Nostr. You know, if we're going to build GitHub on Nostr, or whatever. So, I think having clients of Nostr kind of need some indication of what's going on with the relays. At the very least, you're going to need to pick which relays you're going to post on especially as most of them will be charging, you need to have a relationship with the relay, pay the fee, so you need to do that. But that you could do in a back-settings panel. And what fiatjaf was saying is that shouldn't be on a back-settings panel it should be somehow integrated into the experience so that people are much more aware of where they're getting there stuff and what's going on. And then because they're more aware of it they can make better decisions about it. 

G: Just speaking of GitHub on Nostr. Do you have any ideas on how that could possibly work because you kind of have locks on a repo or merging a commit sort of thing or something like that? You know what I mean

M: My only thoughts are Git itself should not be on Nostr. Git is a very efficient protocol. It's really well written. But, the stuff on GitHub like tracking issues and writing a Pull Request and commenting and things that's not part of Git. And that's what if you just used regular Git servers but you also had the rest of this stuff in Nostr - that's the way I would imagine doing it. But, I haven't thought particularly deeply about even how to do that because I'm working on other problems.

G: What are you working on at the moment or what's taking up most of your time?

M: So most of my time is finishing the first official release of Gossip, which should be in a few days now so it'll be version 0.4 so it's not a 1.0 release but it will be, I'll actually have a version number and I'll put out packages so there will be a Debian package and an arch linux, and a Windows. I would do Mac OS if I could, but I don't have access to Mac OS so it would be nice if somebody could do that for me. Then we'll have a version 0.4. The other thing is because I'm so interested in different way of hooking up with relays, I did a little bit of playing with how could you configure a relay so that it allows people to write events but only if I'm tagged in them. So it's like my inbox. And it allows people to read back events but only the ones I wrote. So people can't post to it and then read their posts back so I don't have to worry moderation, because I'm the only one that can see what people wrote into it. But the can see my events, but I know they're my events so I'm fine with it, right. So then that would be like my personal relay. So I did a little bit of GRPC and I just made up the proto because I don't know what the proto is going to be, because Nostr RS Relay is going to have GRPC where you can your own little server that decides what to allow and what not to allow. So I made a little thing like that, but it looks like Nostr RS's relay is not ready yet so I'm just kind of waiting for them. So that was a fun little diversion yesterday or the day before. 

B: Yeah, could you also talk a little bit about the other NIPs you have outstanding? There's like a NIP 49 and NIP 50.

M: NIP 50 is not anything I know about. I did a NIP 35 that got folded into NIP 5 which is to add relays to the Nostr.json file which you use for validation. I'll tell you about that really briefly. Because when I first came over I was interested in finding people, right. I want to find people so I can follow their stuff. That's the model in my head all the time - how do find people? So I thought, well, if you go into someone's DNS, if someone gives you something a email address, like mike@mikedilger.com, and you go - that's what your NIP 5 validation thing looks like. It looks like an email address, right. And if you go in there and you get the Nostr.json file it tells you the public key. And for validation purposes you're just verifying that's equal to the person that claims that they're person. But I sort of saw it in reverse. I saw, if you know their email address but you don't know their public key, then you want to go to their DNS and grab that Nostr.json file. Now you know the public key of the person, but I also want to know what relays they post on. So, one of the first things I did was I suggested, hey can we add the relays people post on to that Nostr.json file so that I can just type, hey I want to follow mike@mikedilger.com and then the client just figures it out from there. I think that's a really super easy user experience if they just know some email address they just type in an email address and, boom, they're following the person. Of course it divorces them from configuring relays and fiatjaf wants relays to sort of be front and center so I'm not sure if we want to go that way, but if you wanted a really smooth user experience that's where I originally looking at. 

B: I see. So, but there's an issue with having that on the NIP 5 because how do you get that dynamically updated? You know, that unless you have some system, the user would have to update that on a regular basis manually at the current time, right?

M: Yeah, well if you're running the webserver it's not an issue, but if you're not running the webserver then... There's a bunch of NIP 5 services out there now. I mean I keep seeing people posting about them. I don't know much about how they work because I just use my own webserver. But, if there's a NIP 5 service they could offer, you know, type your relays in here. Although, I don't think that's the way we should do it. We should do the NIP 65 which is the one that you have relay list that's on the network because that's digitally signed by your private key so it's, you know, Nostr.json on a DNS looked-up domain name webserver is not as secure. If you already know a person's public key you want to get a digitally signed document that says this is where they post. You don't want to go to their DNS because DNS can be taken over. So, the other one I wrote, and as far as I'm aware, I'm the only one using it, was encrypting your private key. I modified it multiple times because I screwed it up several times, you know. I'm not a cryptographer. I took a cryptography class in school but I'm not a cryptographer. I did screw it up a bit. I think it's pretty good now. We got some feedback from Twitter. Fiatjaf posted on Twitter and a bunch of people (I think they're sort of armchair cryptographers) came back with generally pretty good feedback. But, this goes back to way back when PGP started becoming a thing. I was working, I think it was before I working at SunMicro and Philip Zimmerman had created this thing, Pretty Good Privacy. You own your own keys, you can sign each other's keys and things, and you have PGP key parties to verify that yes, that's the person that key you know. Instead of certificate authorities which is top-down bullshit. In any case, back in those days no body had their private PGP key sitting naked on the disk. Everyone had it encrypted under something and that was just the standard practice. And if you were moving keys around or if you doing even things with PKCS key material, which is again from like the RSA top-down stuff, but there's documents on here's how if you have a secret you keep it under a passphrase. Now that's kind of softened over the years. SSH keys - some people put passwords on them, some people don't bother. I think a lot of people feel like "Eh, I don't think anyone's hacked into my computer. It's probably okay." In which case, they don't care if it's displayed on a screen. They don't care if it's written on the disk. They don't need it to be wrapped up in a password. But, I'm kind of old school and what we did back in the day was you keep your private keys encrypted under something and zero out the memory - that may be old too, it may not be necessary, I don't know; but you zero out the memory so that once you deallocate it and some other process picks it up they don't see your key there. So I'm doing all those sort of old school methods of trying to keep your private keys secure and it's only unwrapped and decrypted in memory and then it wipes that before it deallocates so that no other process on your computer can pick it up. Now if someone has root access on your computer they can scan memory and find it. It's not going to really protect your key. If you really want to protect your key you should use a hardware device. There's some people working on that. There's somebody working on that, I can't remember his name, that is working on a device where it's got a little QR code, I think its a Raspberry Pi Zero, and there's a QR code and you can scan back and forth and it's completely not connected to your computer at all to keep your private keys secure. I think that's really cool. And then there's also talks about keeping your private key on a completely different computer and creating a chain of 256 keys where you can reveal that yes this was the next key in the chain only when you're ready so that you can revoke your key and people still know the right person. There's a NIP for that out there. So I basically just said hey, I think your key should be encrypted. I don't think you should be storing it naked on the disk. So, with Gossip you have type a password. You can make it blank if you really want to. 

B: One quick question about Gossip. There are a couple things I noticed and I'm not sure if I was using it right, Mike. I started adding all the relays and then I realized I shouldn't use all the relays and is there a way, what's the best way for me to clean out all of them because there's no delete button. Should I just dump the entire database at this point? I was going to ask you if there's going to be a way to do that.

M: No, I would keep your database. Since I've stated developing Gossip I've never dumped my database. I'm using the same database that I've been from the very beginning. And I've seen other people complain about bugs and the first thing they do is delete the database. And when you do that you lose all your statistics and you lose your settings. You have to set up again. So far I don't think it's fixed anybody's bugs. So, I don't recommend deleting the database. The thing is, there's no feature for deleting relays. Okay, I have relays in my list that I know are no longer DNS resolving because the person changed the DNS name, but they're still in that list. And one of the reasons is that if I had put a button there saying "delete this relay," the knowledge of this relay, next time you see an event with that URL in it it's just going to stick it back there again and you'll probably see that event next time it loads from your disk because it stores events on the disk. Because that's what I did, I actually put a delete button in there and then as I was testing my new code I deleted then I restarted and there it was again, and I was like "what the hell!" Oh, it just reloaded it from disk again. It just reparsed the event and there's the relay again. And so I thought about, and thought it's really not worth deleting relays. You might as well just set their score to zero. 

B: Do you suggest we just uncheck read and write for each one we're not interested in.

M: Yes, yes, definitely. Just uncheck read and write for the ones you don't like. If it's too many buttons to check, yeah you can delete your database. I mean, I said don't, but whatever. It gets restared pretty quick now. It used to be hard to start. The statistics don't matter as much as they used to so.

B: And one other question about read rank inside of the configure settings for all known relays, there is a read rank. How would we use this feature?

M: Okay, so this is a number from zero to nine and it starts at three. So if you think at three's a good place to start because you can triple to get to nine or go a third of that to get to one. So it basically takes when it's trying to figure out what relays to connect to to find people, you know, if you're following 100 people and some of them are five relays, some of them are on ten relays, and some of them are on two, it doesn't necessarily have to connect to every single relay that everybody lists. It might be able to say, this person has got ten relays, and there's a setting where you can say, "I only want two - I want redundancy. So I at least two relays with their posts on it." And there's a thing called a relay picker which computes which relay to pick next in order to get the highest score  and then to assign public keys that are looking for a relay that are on that relay to the relay and then go tell the minion, which is the worker task that connects to the relays and subscribes, to subscribe to these public keys that got assigned. So that's just an iterative thing. It just says "pick another relay, pick another relay, pick another relay, pick another relays," until it can't pick any more because it has no more, all the people have been picked or there's a way that relays get put into a penalty box  if they've disconnected. Where was I at though?

B: Picking relays.

M: The score. It computes the score based on how well this relay covers that persons posts. So if we found out that this person is associated with that relay because somebody stuck it in a recommended URL in an e-tag or a p-tag, that's not really great information. That's third party information, we don't know if actually true. But we still keep that relationship. But, if we found out because it was digitally signed on their relays list then that's high quality information - it gets a much higher score. So there's a score of assigned with how sure are we that this person posts on that relay. And that then gets multiplied by the relay rank itself, which is normally three, but you can set it to zero which means the score will always be zero no matter what you multiply it by so you'll never connect to that relay. 

B: One thing that's not been clear also, is the list of connected relays on my client often has no keys listed and I'm not sure why this is the case. Originally when I first ran the client it looked like the total number of keys added up to all the followers and everyone who followed me and everyone I followed. And know it looks like there are a lot of gaps and I'm not sure if that's an artifact or if that's because I have a lot of relays selected. 

M: That page scrolls. You're probably not seeing them all. Oh you are, okay.

B: I see all of it.

M: If you have a lot relays selected, then, yeah all the ones you're trying to read people from...here's the thing, if you're putting them as read relays then it tries to always be connected to them just incase someone writes an event to you. That's the way the tag you. So, it's going to have whole bunch of relays in that list that don't have any pubkeys associated because it's not listening to the relay because it's listening for somebody's events, it's listening because they're listening for mentions of you. So if you ticked a lot of them in that list that don't show any pubkeys on them. That's okay. It just means I'm connected to that relay. But, you know, you don't need to have that many you probably just connected to far too many relays. If you went through that whole list and there's no pubkeys showing on any of the relays then something's definitely wrong because that shouldn't come up. You should have, I don't how many people you're following but let's say you follow 100 people, you should have most of those people represented on that list. And you'll see below the list the people that are not being covered. And as you've discovered and I've confirmed now, there's a bug where if you configure "hey, I want at least two relays per person I follow." And sometimes it says this person is short by four relays, how can it be short by four? That's negative numbers. I looked close at the code and maybe I'm just sleepy or something but I can't figure out where the bug is. There's something wrong.

G: So you're maintaining a list of relays in the client. How do you determine whether you should keep trying to reconnect to them if they drop out? Like if there's a flaky connection to them.

M: Right, it's real simple at the moment. I just wait 30 seconds. Basically it's just so that we don't, you know, if there's some relay that doesn't want me connected, I wouldn't want reconnect, disconnect, reconnect, disconnect really really rapidly, that would be kind of nasty to do to a relay so I put a 30 second timeout in. And after 30 seconds we can try again. And, what's actually happening in most of these cases is the NGINX config on the relay is timing out because by default NGINX will proxy-read timeout and proxy-send timeout are 60 seconds by default and a lot people just don't configure that in their NGINX config so these websockets are getting timed out really quick. So my client used to not reconnect at all. My original policy was if we get dropped, we just won't reconnect. We'll be polite. But once I realized that mot of these are just misconfigured NGINX then I thought we'll reconnect but we'll give it a little pause incase. 

G: Yeah, I had issues with own relay and then I realized it was the HA proxy config. Yeah, because I was using the Rust relay. That was the best at the time.

M: Yeah, so that strfry relay is making waves, eh? I mean, with the mem-map and the way the allocation works it's just screamingly fast I hear.

G: The lmdb.

M: Actually when lmdb, lightning mapped, came out that was open ldap it shocked everybody. The whole development community was shocked. How could it possibly be that fast? And it was just some really smart ideas for how it was run. And it like, yeah, it can be that fast.

G: Yeah, memory maps are the unsung hero in so many things.

M: So I would love to do something like that with Gossip but it would have to be architecture specific because I can't do it on Windows, but I could definitely do it on Linux so I'd have to write Arch architecture specific code so it's probably not going to happen. It's not something that a client needs to have that sort of performance anyway. As long as we're faster than the events coming in we're okay.

G: But also, fuck anyone who's using Windows.

B: Yeah.

M: Yeah, I concur with that.

B: Why even use Windows? It's a virus.

M: Yeah, I don't know. I hate it when people write games that run really well on Windows and not anywhere else. 

G: Yeah, because the only way you could write a game before was Windows, like back in the day.

M: Well, I bought a Windows box. I'm talking to you on a Windows box right now. It's not my development box.

G: Ummm - sorry for calling you scum.

M: No, no I'm scum. No, I hate Windows. I really hate Windows and I only have it because I wanted to play Eldenring and I don't think it was running on Linux box right so I got the Windows box just for that. But I'm using it now because it didn't seem like Telegram was working when we tried it on Linux. I think it probably was I just didn't know where to click. So I probably could have kept on Linux, but that's alright. 

G: What are your thoughts on key rotation?

M: I was never a fan of password rotation and I don't think I'm much of a... I mean you have to... If your key is not well taken care of and you know it's not well taken care of you want to go to a stronger situation then we have to have a way to revoke and upgrade. And that might be different from a situation where you know your key has been lost, right. You know for sure your key's been lost then you might have a different way of revoking and upgrading. And I haven't thought through what those protocols or steps should be so I don't really want to speculate, but we're definitely going to need to revoke keys and roll over. I know what people are doing so far is they're just starting a new key and trying to tell everybody hey follow my new key and hopefully the followers come over to that. It would be nice if it were a bit more automatic, but I think there's a lot of thinking to do in that space still. It might be a while before we get something that's in all the clients.

G: It's definitely not optimal right now. Yeah, because I just saw earlier (I think is name Archenox) he lost his private key or something and he's trying to get everyone to refollow him and it's just really annoying. Because if you don't check, if you're not on Nostr every day you miss those kind of things and it's like "wait, why did that guy just disappear?"

M: Exactly. My client, the default it looks back I think is 12 hours. It's going to get all the posts from the last 12 hours and if your gone for a few days, you come back and this person is no longer on the key, you don't notice that they're gone, you don't notice the dog that's not barking. You don't notice that those events are not coming in and you haven't seen anything from the person in a while so it's much better if there's some sort of event that lets your client know at least, even if it was just at the moment, hey this person declares that they've got a new key and it's up to you to figure out if that's honest. But we don't even have that. 

B: How about the model where PGP keys where you can sign other peoples keys? Is that something that we could adopt? A couple of friends of mine and I had a PGP key signing party maybe six months back just trying to teach people how to use it and it was a bit arduous for people who are not technical but still want to learn.

M: It is. I've always found the command line, which is GPG now instead of PGP because it was commercial at some point so they had to switch over. But I've always found the command line to be confusing and the concepts behind what the commands are doing confusing and I always have to read manual after manual to figure out out "Okay I know it does this thing. How does it do this thing?" I know there's graphical interfaces that try to make it easier but even the ones I've seen there don't really lay it out in a way that's simple to understand. So I've been frustrated with that same thing. I think it is frustrating with PGP and it's unfortunate.

B: Have you ever used Keybase?

M: I did. I was on Keybase for a while and they have an interesting way of keys signing keys and tying things together and such so I was on that for a while. 

B: Right. They have a very unique way of validating each others identities because if you follow someone and the other person follows you back you actually see that the color of their username changes. And I think you actually end up signing each other's keys that way on Keybase and the there's a chain of validation. Maybe we could do something like that inside of Nostr where you can revalidate someone else's npub by signing it somehow. I don't know if that's been proposed as a NIP, if it's a good idea or bad idea, but at least have some way to validate if someone decides to switch keys or lose keys. Well now here I am, now all my people inside my circle of trust sign my key and have that as an alternative mechanism to help the problem with lost keys or revocation of keys.

M: I think there's probably something there. Some good use for signing other peoples' keys. Although it's not exactly coming to mind. I don't think it works for revocation because they're signing the key that the guy stole from you and he's got all the signatures from other people saying that he's you. So it doesn't immediately strike me as a solution for revocation, but I do think there's probably some good reason to sign other peoples' keys, it's just not coming to mind. It's something to brainstorm on. Yeah, Keybase, I think I stopped using it because I'm such a loner. I don't know anybody so what's the point of me putting my key out there if nobody knows who I am or what that it's attached to. Yeah, I'm more in this Nostr community I've been in any community in my life, you know. I generally keep to myself.

B: What were you previously doing at SunMicrosystems? I'm very curious going back to that era. I do remember using Sparks but that just entirely died after the early 2000's.

M: Yeah, yeah - which is when I left so I killed it. So I went to University of California, Davis and I did research in computer security. I got a Masters degree doing that focused on security. After the Masters degree I passed the PhD preliminary exam so I was going to potentially do a PhD, but the more I looked into it nine out of ten PhD's don't actually get professorships. And the more I looked into it I could actually get some good money just going straight into the workforce. So I looked for a job and there was one at Sun that had people who I considered as famous in the computer security community. Kasper Dick - on the bug track mailing list about bugs in Solaris. and Alec Muffet who'd wrote the password crack program. And these people were in this group at Sun who were looking to hire a security engineer and I was like "Oh crap, that's where I want to work!" So I applied and got the job. So we did a bunch of different security related stuff for Sun, but it was all for Sun IT. It was internal so it wasn't on the product space. That was a long time ago now.

G: I wanted to ask you a bit more detail about relay scores. So if I'm building a client, how are you using relay scores exactly and what should I be considering.

M: So the relay rank that I talked about from zero to nine, that's a user configuration. You set it to whatever you want. So you can say I really like this relay so bring it up to nine because I want you to definitely prefer coming to this one instead of the others. Or you can set it zero to say, "This relay - I know it's dead so don't waste your time." But I also have other scores on the relay. So I have an success and failure count. So what a success means is that we've connected to the relay and we've opened the websocket and it connected - we're open and connected to the websocket. As soon as it happens the success count gos... I think maybe that's not correct. I think it has to wait for an end of subscribed events, but as some point the success number goes up. And if we couldn't connect, the failure number goes up. And if the relay disconnects from us after a timeout, the failure number goes up. So relays that are working fine but disconnect after 60 seconds, their success number is going up and their failure number is going and so they end up having a success rate of 50%. And I use that in the calculation of "Do we want to try this relay?" Well some of the relays have successes of 100 or 97% or 99% so they're going to be more likely to be going to those instead of the ones that dropped connections. Over time that's what the statistics will push it towards. So I don't know if you's want to copy that model if you were creating a new client, it's just that's what I thought of so I just put it in there.

G: There's a list of relays from nostr.ch, or whatever it is, and I just grabbed that. It's in a yaml file and it's on the repo - it's just constantly being updated. So I grabbed that list and then just query them all and see who's fastest and who's most reliable and keep those and just gut everything else. I check that every X Bitcoin blocks.

M: Right. That's how you keep time, Bitcoin blocks.

G: Yeah! Is there another way to keep time?

M: I don't know. I don't think so. I mean, there probably is but it's much less reliable. Yeah, I don't do any of that. It's probably a good idea to get information about how... There's Nostr.watch as well where you can find out the ping time. And you might want to go to relays that are closer to to you or something. I didn't do that partly, I don't think the ping time really matters all that much compared to whether it's going to actually work because if you're playing a video game the ping time is going to matter quite a lot. But I don't think it really matters, so I didn't put it in. But there are much better statistics about uptime that are collected on services, and I'm not plugged into those, but if I was, if Gossip was plugged into those it would probably have... it's a lot better than the ones that collects itself. But then again you have to trust those services.

G: Have you thought about the possible emergent properties of Nostr itself? Of the Nostr phenomena? Okay, right now this is basically dumb relays, smart clients, but what about indexing services and stuff like that. Have you thought about what that might develop into?

M: Well I'm really excited about all the possibilities. People keep coming with these great ideas. That's why I love listening, subscribing, following people and seeing what's coming up next. There's really cool things that we can do with Nostr. Thing is, it's open. It's this giant open field to just go exploring through. I just want to see what people come up with next. I don't have a whole lot of great ideas in my head as to what to do next. I'm still really focused on following people. Like that's my full focus here. So as soon as I feel like we've cracked that nut and you're going to see...let me put it this way, if everybody plays ball and nobody's censoring anything and the relays all stay up then you're going to see every message of everybody you follow. You won't miss anything. That's the goal. Of course, people will censor, relays will go down, and there will be cases where it doesn't happen, but the protocol should at least get to the point to where if everything works perfectly, you'll see every message. But it's not even there yet, right? Because even if everything works perfectly you don't see every message because they're not on the relay you happen to be reading from. So we have to at least get to the point and then I'll back up and look at what are all these other cool things to do with Nostr. I just don't have time to think about what are these cool things to do. I'm just excited when I see them. It's like the lightning payments, I didn't even know about the lightning network. I had to install that on my phone and start doing that. That was awesome. 

B: Yeah, lightning is really excited actually to see integrated into Nostr. I spent a lot of time with lightning the last two years. And people kept saying to me "this is never going to work" and here we are. So, it's actually really quite refreshing to see people getting very enthusiastic about it. One thing I thought I might want to mention to you since you didn't know much about lightning is there's actually a lightning gossip network. I don't know if you're aware of that.

M: I have unfortunately stumbled across that term once and as soon as I did I was like "Oh shit! I picked the wrong name." And then I also heard about relay operators talk about creating a gossip network between relays to talk about who's doing the spamming or something. And I was like, this is an industry term I didn't know. Unfortunately it's confusing that it's the name of my client...shit. I didn't know. I named my client before I found Nostr.

B: Do you think that you could use some aspects of the lightning gossip network in Nostr? Do you think that we could borrow some concepts from that where we have relays talking to each other and swapping information directly?

M: Yeah, I don't know. There's nothing in Nostr that's relay to relay. It's all client to relay and relay to client. 

B: Yep.

M: And I don't know if you'd call it a different protocol or if you'd consider it part of Nostr or not. That's just a terminology thing or categorical issue that people have to decide. It doesn't technically matter I guess.  

B: Maybe you could lead the way.

M: Yeah, well if I had a good idea of what they should talk about. I think the relay operators have a much better thoughts on this than I do.

G: So when are you releasing the first official release? 

M: So, it should be really soon. Obviously we just found a bug so I'll fix that first. I'm trying to work out how to package it on Windows and some other things around getting it packaged and then it'll just be version 0.4. I'll put all the packages and release things on GitHub and at least for Arch Linux I might have it on the Arch User repository. So that'll be out pretty soon.

B: And you have a chat room for that too on Telegram I noticed?

M: Yeah, I created a chat on Telegram recently so people can talk about some of these things, what we do next, and various things. We didn't really talk about the basic idea of Gossip, which is the fact that I don't consider the client that the average person wants to use. Because I think the average person wants a client that's based on web-rendering technology so they can see images right away. I could do that, I could do images. But they could see links pre-rendered. I can't do that because I have no web browser technology in gossip except http fetch and websockets of course, you have to have that. So there's no JavaScript, there's no interpretting of HTML, there's nothing I can do that way. So, I consider it an ugly client for sort of hacker-like people who want more control and lots of knobs and switches. And I think the threads look okay, you know. But it's not going to be the client that is a good looking client. We can make it look better. I spent almost no time on the design. Just enough to get all the buttons in place and such. Just so that they worked but not to make them look good. So it's sort of this client that's sort of more from a security perspective, it's nice to not use the webstack because the webstack can have a lot of bugs. You can XSS bugs and JavaScript things and media player bugs. You know I'm probably vulnerable. There were bugs in JPEG; I'm probably vulnerable to those, so it's not completely safe. But it's a bit more secure to have a client like that, but it's not your regular client for most people I think.

B: Well, it certainly helped me out a lot this week. I had a pretty big disaster with one of the clients ealier.

M: Yeah, I heard. I heard you lost all the people you followed or all your relays, or something.

B: And this speaks to also how clients are managing their users. I'm not sure exactly what happened with this client and all the relays were deleted in my profile. I suspect it has something to do with all the drama last week where there was a lot of spam coming in, a lot clients couldn't handle it, and a lot of people wanted to go paid relays immediately. I typically cycle through about five different clients just as part of the research into Nostr to see what it is so that's why I don't think all of my follows and vice versa are clustered on one or two relays, but at the same time I was using that client very heavily and all of the sudden it just got completely wiped out and we all got a message saying that you need to go to paid relays. And here I'm sitting, "well which one?" Because I don't know which one it was. And that's exactly why it was time for me to use Gossip because now I need to figure out what clients I was posting to, where everyone else I was previously following. It was very odd because that client only showed me five posts of my entire history after I think Monday or Tuesday and it made it very difficult to do a lot of research. Again, Mike, thank you very much. I really appreciate what you built because it helped a lot in that case.

M: Well I'm really glad it was able to help to some degree on that problem. I use about four or five clients myself and I'm always... You know, Gossip doesn't run on Android so I use several different clients over there. You know, this is early days of Nostr really. All the clients have shortcomings and bugs so it's not surprising that these sorts of things are going to come up. We just have to find them and squash them. It's unfortunate that you lost all of that, but I hope you reconstructed it as best possible. I'm kind of lucky because - I shouldn't be happy about this luck that Gossip is the only one that's using Note 10,002 at the moment so that it can't get clobbered by other clients because no one else is using it as far I'm aware. Again, as far as I'm aware, Gossip is the only client that's reading from where people write. Which I thought initially was pretty obvious if you want to follow people. But I think this idea that you want to follow people wasn't the primary idea in people's heads. And I also think people just copied, what might have been Brandlee initially, that just did it that way just because it was expedient to get something up. I don't know if it was Branlee or not, but I think people just copied a model of "Here's your read and write relays." Just expedient to get something up and they've never gone back and revisited it. So I think Gossip, as far as I'm aware, is the only one that's trying to read from where the people write to.

G: Wait, so you aren't handling other kinds? You're only doing 10,002?

M: No, I am reading from other kinds. So I'm reading from the contents of, if you have contact list Kind three and the contents are JSON serialized relay lists, I'm reading those. And I'm treating them with the same score as if they were 10,002 because it's the same data digitally signed by the other. But, I'm only writing... When you change your contacts in Gossip and you write out your contact list it preserves your contact list as it found them, but it may change your contacts, which are the tags. But Gossip, as far as I'm aware, is the only one that's getting you relays also from 10,002. I hope that's not going to stay that way. I hope people move towards this. I know Mom Loves Mango was on that NIP discussion and he was quite excited about moving towards that so we'll probably see that in Astral.

B: Yeah, and we have a bounty out for clients to implement Gossip actually. I don't know if you're aware of that. Somebody's trying to convince people to implement Gossip in all your clients. 

M: Fiatjaf contacted me at some point and said "Hey, I sent you an email. Respond to my email." And I was like "oh crap." And I looked at me email and there was no email and then I remembered I have two email addresses and I almost never check the other one. But anyhow, I looked at it and he wanted to talk to me about Gossip and this contact model. I'm amazed at how much work this guy does in terms of talking to so many different people about all the different things they're doing. He really gets around and does a lot of that. But he wanted to talk to me about that. So I joined Telegram, I wasn't using Telegram, I joined Telegram so we could have a chat. He basically said he's been trying for a long time to get people to read events at the place people write them so they can find them, right. He wasn't getting much traction, people didn't seem to be listening to him. And he thought he's glad he found Gossip because here's a client that's doing it the way he thought it should go. So he has been trying to spread the word of Gossip. That Gossip exists and he's been trying to get other clients interested in the Gossip relay model. To me, after NIP 65 I thought of calling them inboxes and outboxes instead of read relays and write relays. Because when you write to your write relays, its kind of an outbox. You're sending it to the world. When you're reading from your read relays that's sort of the inbox of things people sent specifically to you. And when you read from someone else's outbox you're reading what they wrote to the world and you write to their inbox, you're writing to...it looks a lot like Activity Pub to be honest. But I didn't think of that until afterwards. So, you know, I'd be happy calling it the Activity Pub model, if that's what it is. But somehow people were calling it the Gossip model so maybe that stuck. So fiatjaf has put some bounties out because he's trying to get people to move to that. Because if we all move to that, we've got massive problems of events being copied from relay to relay to make sure you can find the event, or just make lots and lots of copies, or people are signing up to lots and lots of relays so they don't miss anything, or they're posting to lots and lots of relays. I heard one person suggest that post to almost all the relays and just read from one relay which is sort of the inverse model. It actually has some good properties if you think about it. Most of the time you're reading so most of the traffic is read traffic and you don't post as often so the write traffic is not as much. So if the write traffic was really heavy, you had to write to lots of relays, but you only read from one relay you didn't get duplicate events all the time - that'd cut the traffic way down. With a small number, 10 or 20 relays, that could work quite well, but once you get up to 10,000 relays are you going to write to all 10,000 relays? I don't think that's reasonable. That's like "Okay I'm waiting for the next block on the Bitcoin chain for my transaction to go through - it's been three hours." I'm waiting on this one post on Nostr to go through. I don't think it's going to scale. There's other models that people are imaging to solve this problem, but I'm hoping we're converging on the NIP 65 model. Also, if it turns out it's a dumb idea, I want to know why. Nobody's convinced me that it's a dumb idea or nobody's so far convinced me of a better one. It's hard for me to imagine why you wouldn't want to read from where other people write, but if you don't, if there's a better way of doing it, I want to know. So that's good that you can have this on the podcast so we can all as community hash out which direction we're going to go in.

G: But you still need to get that event that has a list of relays that you're writing to.

M: Right, right. So I tried to make it a very small event. And it's a replaceable event so there's only one per public key. So if you're writing that event to many many relays, you're only going to store one event per relay. So you are writing it to lots of places. There's some innovation too people have talked about. This idea, something like DNS where you look up where people posts their relays or where people's relays write. And I think that's a good idea as long as there's just more than one of those services. You wouldn't want to centralize it. But if there was a service that served people's relay lists, I think that's a good idea. Then you don't have to, instead of saying advertise my list on all these relays, you could just say advertise it to the 15 well know places like Pirate Bay or RarBG. You know how those are centralized places that advertise things that don't hold, in BitTorrent. So it'd be very much the same thing. You just find the relays list from any of these place that are specialized to serve those.

B: Maybe like a DHT model?

G: Yeah, I was just about to say DHT.

B: Mike, are you aware of Holepunch and Keet?

M: Keet and Holepunch, yeah. Yeah, I'm also aware of distributed hash tables and how that's used with BitTorrent. Although, I'm aware of them. I don't quite understand what's happening. Maybe you can explain it.

B: So Holepunch is a platform that's built on top of hypercore protocol which uses the Kademlia DHT. And that's also used in BitTorrent, like a very similar model. So effectively in order to do a peer-to-peer connection you would look up in the DHT to see where your peer would be located and then connect, and then you wouldn't use that DHT for actual data transmission, peer-to-peer. The first app that Holepunch has built is Keet, which is effectively a peer-to-peer video and video chat platform, and it holepunch through a firewall in order to get a connection between two peers.

M: So I have question about that. So let's say both clients are behind common gateway NAT. Can they holepunch and talk to each other?

B: They can as long as your network does not throttle you to nothing. It's at the game serves I guess. You have to certain ports through that firewall, otherwise you just can't. I've experienced issues with Holepunch. I don't know what's going on, specifically with one of my networks where I can't actually Holepunch out. It's possible the ISP may not let it go through and other ISPs will allow for it. But I feel in many ways that the group that's working on Holepunch and Keet are sort of like a sister platform to what Nostr is currently doing and if they are going to be completely open source at some point then maybe there could be a way to bridge the gap between just posting notes on Nostr and then, alternatively, maybe using a peer-to-peer connection for audio and video communications because Nostr isn't the place to do that right now.

M: Right, right, and I don't even think it's the right place to do NIP 4. So NIP 4 is your direct message. You're encrypted private direct messages. And all the metadata is just sitting right there in the notes. Everybody could read the metadata so they now who's talking to who. So it'd be nice if they didn't. Also, the encryption, it's not quite right. It's pretty good, but there's some things that could have been done better. And those encrypted messages are sitting there for a very long time. Someone can spend massive amounts of time with an ASIC trying to break one of them. Because they can get them. I guess you could do that if you could grab an encrypted message from any other thing, but I think there is definitely a possibility for having a new Nostr message which basically just advertises where your direct messaging listener is available. Like, I'm listening on this server over here and if anyone wants to contact me then come talk to me using this non-Nostr protocol, some other protocol. And I'm ready to take your call. You just have a Nostr message that just advertises this. Maybe it's just in your metadata. You just have a URL in your metadata saying here's how to find me, here's how to direct message me. And the direct messages are actually using something outside of Nostr so that they're not on the relays that everyone can see. Because Nostr's really a public database. It's like your sharing...you're almost doing an SQL query with these filters. You're saying here's a bunch of data. Anyone can put stuff in, anybody can take stuff out, but you can't update, or change, or delete things. You can just write things and read things.

B: Wait, aren't there ephemeral events which can disappear? 

M: Yeah, but clients can't trust that the relay's going to disappear them or other clients are going disappear them. People can collect them if they want.

B: I see.

M: But yeah, it's meant to say, look nobody expects this to stick around and best policy is just drop it. Don't even write it to disk, don't even store in the database, just stream it right out to other people that want it and never let it drop on the disk. And most of the relays, that's how they're coded so they're ephemeral. But who knows which relay operator is going to change the code and collect them all so you don't want to rely on that. But anyhow, in your metadata you have a link to wherever your private chat system is - wherever your listening for private chat. And that can be done through other protocols because there's other protocols. We don't have to do everything over Nostr. Nostr is a really great thing. It can just be a way to point to that other protocol to do direct messaging.

Transition

G: Head over to Nostrovia.org to see how to follow us on all the major social credit platforms.

   
